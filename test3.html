<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-gltf-part-component/dist/aframe-gltf-part-component.min.js"></script>
  <script src="scripts.js"></script>
  <script>
    AFRAME.registerComponent('cursor-listener', {
      init: function () {
        this.el.addEventListener('mousedown', function (evt) {
          if(selected && selected != this.Id) document.getElementById(selected).setAttribute("opacity","1");
          this.setAttribute("opacity","0.8");
          selected = this.id;
          console.log("Currently selected: "+selected);
        });
      }
    });
  </script>
</head>

<body>
  <a-scene>
    <div style="position: fixed; top: 10px; width:100%; text-align: center; z-index: 1;">
      <button id="hide_selected">Hide selected</button>
      <button id="unhide_all">Unhide all</button>
    </div>
    <a-assets timeout="30000">
      <a-asset-item id="fossils" src="fossils/scene.gltf"></a-asset-item>
    </a-assets>

    <a-camera position="0 1.6 0">
      <a-entity cursor="rayOrigin: mouse"
                raycaster="interval: 200; objects: .interactible"
                position="0 0 -0.1">
      </a-entity>
    </a-camera>

    <!-- 2D environment omitted for simplicity -->
    <!--<a-sky color="#ECECEC"></a-sky>-->

    <script>
      var parts = ["01","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];
      var scale = 0.2;
      var rowLength = 5;
      var xStart = -2;
      var zPos = 0;
      //var spacing = 0.5*scale;

      for(var i=0; i<parts.length; i++){
        if (i%rowLength==0) zPos--;
        document.write('<a-entity class="interactible" id="fossil'+parts[i]+'" cursor-listener gltf-part="src: #fossils; part: fossil'+parts[i]+'" position="'+(xStart+i%rowLength)*scale+' 1.6 '+(zPos)*scale+'" scale="'+scale+' '+scale+' '+scale+'" transparent="true"></a-entity>');
      };

    </script>
  </a-scene>


</body>

</html>
